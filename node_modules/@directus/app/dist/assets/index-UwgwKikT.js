import{T as We,w as Se,a as Ce,v as Ee}from"./vue.runtime.esm-bundler-lXDGSjR2.js";import{t as Te,u as xe,v as Be,_ as R,w as ye,x as ce,y as we,z as Oe,M as Le,A as de,B as je,C as Fe,D as Re,E as Ae,F as qe,S as ze,G as He,H as Ne,I as Ze,J as Ge,K as Pe,L as Ke,N as Ye,V as Me,O as Je}from"./index.hQ6KFwWk.entry.js";import{u as Qe,a as Xe,b as et,c as tt}from"./index-9vZu-REn.js";import{storeToRefs as ve}from"./pinia.uCKSZMNe.entry.js";import{useI18n as se}from"./vue-i18n.sqcOjxJQ.entry.js";import{useRouter as Ie}from"./vue-router.3-oaKJpv.entry.js";import{d as A,c as k,e as S,bj as $e,w as te,b5 as v,b6 as ne,by as z,aY as a,ad as g,bw as s,af as M,I as oe,y as l,ae as B,ag as x,aN as j,b7 as De,u,ak as F,bf as U,b3 as ae,aF as nt,b4 as Y,aM as ot,n as at,p as st,ai as lt,aO as it,ax as rt,a$ as ct,aZ as ut}from"./runtime-core.esm-bundler-texBTZaP.js";const dt=["src"],vt=A({__name:"module-bar-logo",setup(i){const{t:e}=se(),n=Te(),r=xe(),o=k(()=>{var d;return r.settings===null||!((d=r.settings)!=null&&d.project_logo)?null:`${Be()}assets/${r.settings.project_logo}`}),t=S(!1),{queueHasItems:p}=$e(n);te(()=>p.value,d=>{d&&(t.value=!0)});const _=k(()=>{var d;return(d=r.settings)==null?void 0:d.project_url}),b=k(()=>{var d;return(d=r.settings)!=null&&d.project_url?e("view_project"):!1});function m(){p.value===!1&&(t.value=!1)}return(d,$)=>{const y=v("v-progress-linear"),V=ne("tooltip");return z((a(),g(De(_.value?"a":"div"),{href:_.value,target:_.value?"_blank":void 0,rel:_.value?"noopener noreferrer":void 0,class:j(["module-bar-logo",{loading:t.value}])},{default:s(()=>[o.value?(a(),M(oe,{key:0},[l(We,{name:"fade"},{default:s(()=>[t.value?(a(),g(y,{key:0,indeterminate:"",rounded:"",onAnimationiteration:m})):B("",!0)]),_:1}),x("img",{class:"custom-logo",src:o.value,alt:"Project Logo"},null,8,dt)],64)):(a(),M("div",{key:1,class:j(["logo",{running:t.value}]),onAnimationiteration:m},null,34))]),_:1},8,["href","target","rel","class"])),[[V,b.value,void 0,{right:!0}]])}}}),_t=R(vt,[["__scopeId","data-v-c5931858"]]),pt={class:"module-bar-avatar"},mt=["src","alt"],ft=A({__name:"module-bar-avatar",setup(i){const{t:e}=se(),n=ye(),r=ce(),{notificationsDrawerOpen:o}=ve(n),{unread:t}=ve(r),p=we(),_=S(!1),b=k(()=>{var V;return!p.currentUser||!("avatar"in p.currentUser)||!((V=p.currentUser)!=null&&V.avatar)?null:Oe(`${Be()}assets/${p.currentUser.avatar.id}?key=system-medium-cover`)}),m=S(null),d=k(()=>`/users/${p.currentUser.id}`),$=k(()=>"/logout"),y=p.fullName??void 0;return(V,h)=>{const W=v("v-icon"),T=v("v-button"),O=v("v-badge"),Z=v("v-card-title"),J=v("v-card-actions"),Q=v("v-card"),X=v("v-dialog"),G=v("v-avatar"),le=v("router-link"),P=v("v-hover"),ee=ne("tooltip");return a(),M("div",pt,[l(O,{value:u(t),disabled:u(t)==0,class:"notifications-badge"},{default:s(()=>[z((a(),g(T,{tile:"",icon:"","x-large":"",class:"notifications",onClick:h[0]||(h[0]=H=>o.value=!0)},{default:s(()=>[l(W,{name:"notifications"})]),_:1})),[[ee,u(e)("notifications"),void 0,{right:!0}]])]),_:1},8,["value","disabled"]),l(P,null,{default:s(({hover:H})=>[l(X,{modelValue:_.value,"onUpdate:modelValue":h[2]||(h[2]=E=>_.value=E),onEsc:h[3]||(h[3]=E=>_.value=!1)},{activator:s(({on:E})=>[l(We,{name:"sign-out"},{default:s(()=>[H?z((a(),g(T,{key:0,tile:"",icon:"","x-large":"",class:"sign-out",onClick:E},{default:s(()=>[l(W,{name:"logout"})]),_:2},1032,["onClick"])),[[ee,u(e)("sign_out"),void 0,{right:!0}]]):B("",!0)]),_:2},1024)]),default:s(()=>[l(Q,null,{default:s(()=>[l(Z,null,{default:s(()=>[F(U(u(e)("sign_out_confirm")),1)]),_:1}),l(J,null,{default:s(()=>[l(T,{secondary:"",onClick:h[1]||(h[1]=E=>_.value=!_.value)},{default:s(()=>[F(U(u(e)("cancel")),1)]),_:1}),l(T,{to:$.value},{default:s(()=>[F(U(u(e)("sign_out")),1)]),_:1},8,["to"])]),_:1})]),_:1})]),_:2},1032,["modelValue"]),l(le,{to:d.value},{default:s(()=>[z((a(),g(G,{tile:"",large:"",class:j({"no-avatar":!b.value})},{default:s(()=>[b.value&&!m.value?(a(),M("img",{key:0,src:b.value,alt:u(y),class:"avatar-image",onError:h[4]||(h[4]=E=>m.value=E)},null,40,mt)):(a(),g(W,{key:1,name:"account_circle"}))]),_:1},8,["class"])),[[ee,u(y),void 0,{right:!0}]])]),_:1},8,["to"])]),_:1})])}}}),ht=R(ft,[["__scopeId","data-v-56ca75de"]]),gt={class:"module-bar"},bt={class:"modules"},yt=A({__name:"module-bar",setup(i){const e=xe(),{modules:n}=Fe(),r=k(()=>n.value.map(t=>t.id)),o=k(()=>e.settings?(e.settings.module_bar??Le).filter(t=>t.type==="link"?!0:t.enabled&&r.value.includes(t.id)).map(t=>{if(t.type==="link"){const _=de.omit(t,["url"]);return t.url.startsWith("/")?_.to=t.url:_.href=t.url,je(_)}const p=n.value.find(_=>_.id===t.id);return{...t,...n.value.find(_=>_.id===t.id),to:`/${p.id}`}}):[]);return(t,p)=>{const _=v("v-icon"),b=v("v-button"),m=ne("tooltip");return a(),M("div",gt,[l(_t),x("div",bt,[(a(!0),M(oe,null,ae(o.value,d=>z((a(),g(b,{key:d.id,icon:"","x-large":"",to:d.to,href:d.href,tile:""},{default:s(()=>[l(_,{name:d.icon},null,8,["name"])]),_:2},1032,["to","href"])),[[m,d.name,void 0,{right:!0}]])),128))]),l(ht)])}}}),wt=R(yt,[["__scopeId","data-v-572954c3"]]),kt={class:"notification-dialogs"},$t={target:"_blank",href:"https://github.com/directus/directus/issues/new?template=bug_report.yml"},St=A({__name:"notification-dialogs",setup(i){const{t:e}=se(),n=ce(),{isAdmin:r}=we(),o=k(()=>n.dialogs);function t(p){n.remove(p)}return(p,_)=>{const b=v("v-card-title"),m=v("v-error"),d=v("v-card-text"),$=v("v-button"),y=v("v-card-actions"),V=v("v-card"),h=v("v-dialog");return a(),M("div",kt,[(a(!0),M(oe,null,ae(o.value,W=>(a(),g(h,{key:W.id,"model-value":"",persist:""},{default:s(()=>[l(V,{class:j([W.type])},{default:s(()=>[l(b,null,{default:s(()=>[F(U(W.title),1)]),_:2},1024),W.text||W.error?(a(),g(d,{key:0},{default:s(()=>[F(U(W.text)+" ",1),W.error?(a(),g(m,{key:0,error:W.error},null,8,["error"])):B("",!0)]),_:2},1024)):B("",!0),l(y,null,{default:s(()=>[W.type==="error"&&u(r)&&W.code==="UNKNOWN"?(a(),g($,{key:0,secondary:""},{default:s(()=>[x("a",$t,U(u(e)("report_error")),1)]),_:1})):B("",!0),l($,{onClick:T=>t(W.id)},{default:s(()=>[F(U(u(e)("dismiss")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024))),128))])}}}),Nt=R(St,[["__scopeId","data-v-69650eae"]]),Mt={key:1,class:"content"},Vt=["onClick"],Wt={key:0,class:"message"},Ct=A({__name:"notifications-drawer",setup(i){const{t:e}=se(),n=ye(),r=we(),o=Re(),{setUnreadCount:t}=ce(),p=Ie(),_=S([]),b=S(["inbox"]),m=S([]),d=S(1),$=S(25),y=S(null),V=S({}),h=S(null);te(b,(N,C)=>{N[0]!==C[0]&&(d.value=1,_.value=[])}),te([y,V],()=>{d.value=1});function W(N){_.value.includes(N)?_.value.splice(_.value.indexOf(N),1):_.value.push(N)}function T(N){m.value.includes(N)?m.value.splice(m.value.indexOf(N),1):m.value.push(N)}const{notificationsDrawerOpen:O}=ve(n),Z=k(()=>({_and:[{recipient:{_eq:r.currentUser.id}},{status:{_eq:b.value[0]}},V.value]})),{items:J,loading:Q,getItems:X,totalPages:G,getItemCount:le}=Qe(S("directus_notifications"),{filter:Z,fields:S(["id","subject","message","collection","item","timestamp"]),sort:S(["-timestamp"]),search:y,limit:$,page:d}),P=k(()=>J.value.map(N=>{var L;let C;if(N.collection){const I=o.getCollection(N.collection);(L=I==null?void 0:I.meta)!=null&&L.singleton||!N.item?C=Ae(N.collection):C=qe(N.collection,N.item)}else String(N.item).startsWith("/")&&(C=String(N.item));return{...N,to:C}}));async function ee(){await Ne.patch("/notifications",{query:{recipient:{_eq:r.currentUser.id}},data:{status:"archived"}}),await le(),await X(),t(0)}async function H(){await Ne.patch("/notifications",{keys:_.value,data:{status:b.value[0]==="inbox"?"archived":"inbox"}}),await le(),await X(),_.value=[]}function E(N){p.push(N),O.value=!1}return(N,C)=>{const L=v("v-icon"),I=v("v-button"),ue=v("v-list-item-icon"),_e=v("v-list-item-content"),pe=v("v-tab"),me=v("v-tabs"),fe=v("v-info"),he=v("v-skeleton-loader"),c=v("v-list"),f=v("v-checkbox"),q=v("v-text-overflow"),ie=v("v-list-item"),ge=v("v-pagination"),D=v("v-drawer"),re=ne("tooltip"),ke=ne("md");return a(),g(D,{modelValue:u(O),"onUpdate:modelValue":C[5]||(C[5]=w=>nt(O)?O.value=w:null),icon:"notifications",title:u(e)("notifications"),"sidebar-label":u(e)("folders"),onCancel:C[6]||(C[6]=w=>O.value=!1)},{actions:s(()=>[l(ze,{modelValue:y.value,"onUpdate:modelValue":C[0]||(C[0]=w=>y.value=w),filter:V.value,"onUpdate:filter":C[1]||(C[1]=w=>V.value=w),collection:"directus_notifications"},null,8,["modelValue","filter"]),z((a(),g(I,{icon:"",rounded:"",disabled:_.value.length===0,secondary:"",onClick:H},{default:s(()=>[l(L,{name:b.value[0]==="inbox"?"archive":"move_to_inbox"},null,8,["name"])]),_:1},8,["disabled"])),[[re,b.value[0]==="inbox"?u(e)("archive"):u(e)("unarchive"),void 0,{bottom:!0}]]),b.value[0]==="inbox"?z((a(),g(I,{key:0,icon:"",rounded:"",disabled:P.value.length===0,onClick:ee},{default:s(()=>[l(L,{name:"done_all"})]),_:1},8,["disabled"])),[[re,u(e)("archive_all"),void 0,{bottom:!0}]]):B("",!0)]),sidebar:s(()=>[l(me,{modelValue:b.value,"onUpdate:modelValue":C[2]||(C[2]=w=>b.value=w),vertical:""},{default:s(()=>[l(pe,{value:"inbox"},{default:s(()=>[l(ue,null,{default:s(()=>[l(L,{name:"inbox"})]),_:1}),l(_e,null,{default:s(()=>[F(U(u(e)("inbox")),1)]),_:1})]),_:1}),l(pe,{value:"archived"},{default:s(()=>[l(ue,null,{default:s(()=>[l(L,{name:"archive"})]),_:1}),l(_e,null,{default:s(()=>[F(U(u(e)("archive")),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:s(()=>[!u(Q)&&P.value.length===0?(a(),g(fe,{key:0,icon:"notifications",title:u(e)("no_notifications"),center:""},{default:s(()=>[F(U(u(e)("no_notifications_copy")),1)]),_:1},8,["title"])):(a(),M("div",Mt,[u(Q)?(a(),g(c,{key:0,class:"notifications"},{default:s(()=>[(a(),M(oe,null,ae(10,w=>l(he,{key:w,class:j({dense:u(G)>1})},null,8,["class"])),64))]),_:1})):(a(),g(c,{key:1,class:"notifications"},{default:s(()=>[(a(!0),M(oe,null,ae(P.value,w=>(a(),g(ie,{key:w.id,block:"",dense:u(G)>1,clickable:!!w.message,onMousedown:C[3]||(C[3]=Se(({target:K})=>h.value=K,["left","self"])),onMouseup:Se(({target:K})=>{K===h.value&&T(w.id),h.value=null},["left","self"])},{default:s(()=>[x("div",{class:"header",onClick:K=>T(w.id)},[l(f,{"model-value":_.value.includes(w.id),"onUpdate:modelValue":K=>W(w.id)},null,8,["model-value","onUpdate:modelValue"]),l(q,{class:"title",highlight:y.value,text:w.subject},null,8,["highlight","text"]),l(He,{value:w.timestamp,type:"timestamp",relative:""},{default:s(({datetime:K})=>[l(q,{class:"datetime",text:K},null,8,["text"])]),_:2},1032,["value"]),w.to?z((a(),g(L,{key:0,clickable:"",name:"open_in_new",onClick:K=>E(w.to)},null,8,["onClick"])),[[re,u(e)("goto_collection_content")]]):B("",!0),w.message?(a(),g(L,{key:1,clickable:"",name:m.value.includes(w.id)?"expand_less":"expand_more"},null,8,["name"])):B("",!0)],8,Vt),m.value.includes(w.id)&&w.message?z((a(),M("div",Wt,null,512)),[[ke,w.message]]):B("",!0)]),_:2},1032,["dense","clickable","onMouseup"]))),128))]),_:1})),u(G)>1?(a(),g(ge,{key:2,modelValue:d.value,"onUpdate:modelValue":C[4]||(C[4]=w=>d.value=w),"total-visible":5,length:u(G)},null,8,["modelValue","length"])):B("",!0)]))]),_:1},8,["modelValue","title","sidebar-label"])}}}),xt=R(Ct,[["__scopeId","data-v-81248a9d"]]),Bt={key:0,class:"icon"},It={class:"content"},Dt={class:"title selectable"},Ut={key:0,class:"text selectable"},Et=A({__name:"notification-item",props:{id:{},title:{},text:{},icon:{},type:{default:"info"},tail:{type:Boolean},dense:{type:Boolean},showClose:{type:Boolean},loading:{type:Boolean},progress:{}},setup(i){const e=i,n=ce();function r(){e.showClose===!0&&n.remove(e.id)}return(o,t)=>{const p=v("v-progress-circular"),_=v("v-icon");return a(),M("div",{class:j(["notification-item",[o.type,{tail:o.tail,dense:o.dense}]]),onClick:r},[o.loading||o.progress||o.icon?(a(),M("div",Bt,[o.loading?(a(),g(p,{key:0,indeterminate:"",small:""})):o.progress?(a(),g(p,{key:1,small:"",value:o.progress},null,8,["value"])):(a(),g(_,{key:2,name:o.icon},null,8,["name"]))])):B("",!0),x("div",It,[x("p",Dt,U(o.title),1),o.text?(a(),M("p",Ut,U(o.text),1)):B("",!0)]),o.showClose?(a(),g(_,{key:1,name:"close",clickable:"",class:"close",onClick:r})):B("",!0)],2)}}}),Ue=R(Et,[["__scopeId","data-v-7d21b14f"]]),Tt=A({__name:"notifications-group",props:{sidebarOpen:{type:Boolean}},setup(i){const e=ce(),n=$e(e).queue;return(r,o)=>(a(),g(Ce,{class:j(["notifications-group",{"sidebar-open":r.sidebarOpen}]),name:"slide-fade",tag:"div"},{default:s(()=>[Y(r.$slots,"default",{},void 0,!0),(a(!0),M(oe,null,ae(u(n),(t,p)=>(a(),g(Ue,{id:t.id,key:t.id,title:t.title,icon:t.icon,type:t.type,loading:t.loading,progress:t.progress,tail:p===u(n).length-1,dense:r.sidebarOpen===!1,"show-close":t.persist===!0&&t.closeable!==!1},null,8,["id","title","icon","type","loading","progress","tail","dense","show-close"]))),128))]),_:3},8,["class"]))}}),Ot=R(Tt,[["__scopeId","data-v-00758c2d"]]),Lt={class:"icon"},jt={key:0,class:"title"},Ft=A({__name:"sidebar-button",props:{to:{},icon:{default:"box"},active:{type:Boolean}},emits:["click"],setup(i){const e=ye(),{sidebarOpen:n}=$e(e);return(r,o)=>{const t=v("v-icon");return a(),g(De(r.to?"router-link":"button"),{class:j(["sidebar-button",{active:r.active}]),onClick:o[0]||(o[0]=p=>r.$emit("click",p))},{default:s(()=>[x("div",Lt,[l(t,{name:r.icon},null,8,["name"])]),u(n)?(a(),M("div",jt,[Y(r.$slots,"default",{},void 0,!0)])):B("",!0)]),_:3},8,["class"])}}}),Rt=R(Ft,[["__scopeId","data-v-3acfa986"]]),At={class:"notifications-preview"},qt={key:0,class:"inline"},zt={class:"padding-box"},Ht=A({__name:"notifications-preview",props:{sidebarOpen:{type:Boolean},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(i){const{t:e}=se(),n=ce(),{lastFour:r}=ve(n);return(o,t)=>{const p=v("router-link"),_=v("transition-expand"),b=ne("tooltip");return a(),M("div",At,[l(_,{tag:"div"},{default:s(()=>[o.modelValue?(a(),M("div",qt,[x("div",zt,[l(p,{class:j(["link",{"has-items":u(r).length>0}]),to:"/activity"},{default:s(()=>[F(U(u(e)("show_all_activity")),1)]),_:1},8,["class"]),l(Ce,{tag:"div",name:"notification",class:"transition"},{default:s(()=>[(a(!0),M(oe,null,ae(u(r),m=>(a(),g(Ue,ot({key:m.id},m),null,16))),128))]),_:1})])])):B("",!0)]),_:1}),z((a(),g(Rt,{active:o.modelValue,class:"toggle",icon:"pending_actions",onClick:t[0]||(t[0]=m=>o.$emit("update:modelValue",!o.modelValue))},{default:s(()=>[F(U(u(e)("activity_log")),1)]),_:1},8,["active"])),[[b,!o.sidebarOpen&&u(e)("activity_log"),void 0,{left:!0}]])])}}}),Zt=R(Ht,[["__scopeId","data-v-63e60302"]]),Ve=i=>Number.isFinite(i)?i:0;function Gt(i){return{days:Math.trunc(i/864e5),hours:Math.trunc(i/36e5%24),minutes:Math.trunc(i/6e4%60),seconds:Math.trunc(i/1e3%60),milliseconds:Math.trunc(i%1e3),microseconds:Math.trunc(Ve(i*1e3)%1e3),nanoseconds:Math.trunc(Ve(i*1e6)%1e3)}}function Pt(i){return{days:i/86400000n,hours:i/3600000n%24n,minutes:i/60000n%60n,seconds:i/1000n%60n,milliseconds:i%1000n,microseconds:0n,nanoseconds:0n}}function Kt(i){switch(typeof i){case"number":{if(Number.isFinite(i))return Gt(i);break}case"bigint":return Pt(i)}throw new TypeError("Expected a finite number or bigint")}const Yt=i=>i===0||i===0n,Jt=(i,e)=>e===1||e===1n?i:`${i}s`,Qt=1e-7,Xt=24n*60n*60n*1000n;function be(i,e){const n=typeof i=="bigint";if(!n&&!Number.isFinite(i))throw new TypeError("Expected a finite number or bigint");e={...e},e.colonNotation&&(e.compact=!1,e.formatSubMilliseconds=!1,e.separateMilliseconds=!1,e.verbose=!1),e.compact&&(e.unitCount=1,e.secondsDecimalDigits=0,e.millisecondsDecimalDigits=0);let r=[];const o=(m,d)=>{const $=Math.floor(m*10**d+Qt);return(Math.round($)/10**d).toFixed(d)},t=(m,d,$,y)=>{if(!((r.length===0||!e.colonNotation)&&Yt(m)&&!(e.colonNotation&&$==="m"))){if(y=y??String(m),e.colonNotation){const V=y.includes(".")?y.split(".")[0].length:y.length,h=r.length>0?2:1;y="0".repeat(Math.max(0,h-V))+y}else y+=e.verbose?" "+Jt(d,m):$;r.push(y)}},p=Kt(i),_=BigInt(p.days);if(t(_/365n,"year","y"),t(_%365n,"day","d"),t(Number(p.hours),"hour","h"),t(Number(p.minutes),"minute","m"),e.separateMilliseconds||e.formatSubMilliseconds||!e.colonNotation&&i<1e3){const m=Number(p.seconds),d=Number(p.milliseconds),$=Number(p.microseconds),y=Number(p.nanoseconds);if(t(m,"second","s"),e.formatSubMilliseconds)t(d,"millisecond","ms"),t($,"microsecond","µs"),t(y,"nanosecond","ns");else{const V=d+$/1e3+y/1e6,h=typeof e.millisecondsDecimalDigits=="number"?e.millisecondsDecimalDigits:0,W=V>=1?Math.round(V):Math.ceil(V),T=h?V.toFixed(h):W;t(Number.parseFloat(T),"millisecond","ms",T)}}else{const m=(n?Number(i%Xt):i)/1e3%60,d=typeof e.secondsDecimalDigits=="number"?e.secondsDecimalDigits:1,$=o(m,d),y=e.keepDecimalsOnWholeSeconds?$:$.replace(/\.0+$/,"");t(Number.parseFloat(y),"second","s",y)}if(r.length===0)return"0"+(e.verbose?" milliseconds":"ms");const b=e.colonNotation?":":" ";return typeof e.unitCount=="number"&&(r=r.slice(0,Math.max(e.unitCount,1))),r.join(b)}const en={class:"latency-indicator"},tn=A({__name:"latency-indicator",setup(i){const{t:e}=se(),n=Ze(),r=k(()=>{const b=de.sortBy(n.latency,["timestamp"]);return b[b.length-1]}),o=k(()=>{if(!n.latency||n.latency.length===0)return 0;const b=de.sortBy(n.latency,["timestamp"]),m=b.slice(Math.max(b.length-5,0));let d=0;for(const{latency:$}of m)d+=$;return Math.round(d/m.length)}),t=k(()=>o.value<=250?4:o.value>250&&o.value<=500?3:o.value>500&&o.value<=750?2:1),p=k(()=>{switch(t.value){case 4:return`${e("connection_excellent")}
(${be(o.value)} ${e("latency")})`;case 3:return`${e("connection_good")}
(${be(o.value)} ${e("latency")})`;case 2:return`${e("connection_fair")}
(${be(o.value)} ${e("latency")})`;case 1:return`${e("connection_poor")}
(${be(o.value)} ${e("latency")})`;default:return null}}),_=k(()=>{switch(t.value){case 4:return"signal_wifi_4_bar";case 3:return"signal_wifi_3_bar";case 2:return"signal_wifi_2_bar";case 1:return"signal_wifi_1_bar";default:return null}});return(b,m)=>{const d=v("v-progress-circular"),$=v("v-icon"),y=ne("tooltip");return z((a(),M("div",en,[r.value?(a(),g($,{key:1,name:_.value},null,8,["name"])):(a(),g(d,{key:0,indeterminate:""}))])),[[y,p.value,void 0,{bottom:!0,end:!0}]])}}}),nn=R(tn,[["__scopeId","data-v-93933dfa"]]),on={class:"project-info"},an={class:"name-container"},sn=A({__name:"project-info",setup(i){const e=Ge(),n=k(()=>{var o,t;return(t=(o=e.info)==null?void 0:o.project)==null?void 0:t.project_name}),r=k(()=>{var o,t;return(t=(o=e.info)==null?void 0:o.project)==null?void 0:t.project_descriptor});return(o,t)=>{const p=v("v-text-overflow");return a(),M("div",on,[l(nn),x("div",an,[l(p,{placement:"right",class:"name",text:n.value},null,8,["text"]),r.value?(a(),g(p,{key:0,placement:"right",class:"descriptor",text:r.value},null,8,["text"])):B("",!0)])])}}}),ln=R(sn,[["__scopeId","data-v-142557c9"]]),rn=A({__name:"sidebar-detail-group",props:{sidebarOpen:{type:Boolean}},setup(i){const e=i,n=S([]),r=S(!1);return te(()=>e.sidebarOpen,async o=>{o===!1?n.value=[]:(r.value=!0,await at(),r.value=!1)}),(o,t)=>{const p=v("v-item-group");return a(),g(p,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=_=>n.value=_),class:"sidebar-detail-group",scope:"sidebar-detail",mandatory:r.value},{default:s(()=>[Y(o.$slots,"default",{},void 0,!0)]),_:3},8,["modelValue","mandatory"])}}}),cn=R(rn,[["__scopeId","data-v-d961026b"]]),un=i=>(ct("data-v-e89b79df"),i=i(),ut(),i),dn={class:"module-nav alt-colors"},vn={class:"module-nav-content"},_n={class:"content-wrapper"},pn={class:"flex-container"},mn=un(()=>x("div",{class:"spacer"},null,-1)),fn=A({__name:"private-view",props:{title:{},smallHeader:{type:Boolean},headerShadow:{type:Boolean,default:!0},splitView:{type:Boolean},splitViewMinWidth:{default:0},sidebarShadow:{type:Boolean}},emits:["update:splitView"],setup(i,{emit:e}){var fe,he;const n={moduleBarWidth:60,minModuleNavWidth:220,minContentWidth:590,collapsedSidebarWidth:60,overlaySpace:60},r=i,o=e,{t}=se(),p=Ie(),_=k(()=>r.title??null),b=Xe(r,"splitView",o),m=S(),d=S(),$=S();let y;const V=()=>{var c;clearTimeout(y),(c=m.value)==null||c.classList.remove("hide-overflow-x")};te(b,()=>{if(!m.value||!d.value)return;m.value.classList.add("hide-overflow-x","hide-overflow-y"),y=setTimeout(V,1500);let c,f;const q=()=>{var ie;clearTimeout(c),f==null||f(),(ie=m.value)==null||ie.classList.remove("hide-overflow-y")};c=setTimeout(q,1500),f=Pe(d.value,"transitionend",q)});const{width:h}=Ke(),{width:W}=et($),T=k(()=>{if(!b.value)return!0;let c;return h.value>=1260?c=h.value-n.moduleBarWidth-n.minModuleNavWidth-n.minContentWidth-W.value:h.value>=960?c=h.value-n.moduleBarWidth-n.minModuleNavWidth-n.minContentWidth-n.collapsedSidebarWidth:c=h.value-n.minContentWidth,c>=r.splitViewMinWidth}),{data:O}=Ye("module-width",{}),Z=S(me((fe=O.value)==null?void 0:fe.nav,n.minModuleNavWidth));te(Z,de.debounce(c=>{O.value={...O.value??{},nav:c}},300));const J=S(me((he=O.value)==null?void 0:he.main,n.minContentWidth));te(J,de.debounce(c=>{O.value={...O.value??{},main:c}},300));const Q=S(!1),X=k(()=>{const c=b.value?r.splitViewMinWidth:0,f=T.value?n.minContentWidth+c:n.minContentWidth;let q;return h.value>=1260?q=h.value-n.moduleBarWidth-f-W.value:h.value>=960?q=h.value-n.moduleBarWidth-f-n.collapsedSidebarWidth:q=h.value-n.moduleBarWidth+n.overlaySpace,Math.max(q,n.minModuleNavWidth)}),G=k(()=>{const c=b.value?r.splitViewMinWidth:0;let f;return h.value>=1260?f=h.value-n.moduleBarWidth-Z.value-c-W.value:h.value>=960?f=h.value-n.moduleBarWidth-Z.value-c-n.collapsedSidebarWidth:f=h.value-c,Math.max(f,n.minContentWidth)}),le=k(()=>({snapZones:[{width:40,snapPos:n.minModuleNavWidth,direction:"left"},{width:40,snapPos:X.value,direction:"right"}]})),P=S(!1),ee=k(()=>({snapZones:[{width:40,snapPos:n.minContentWidth,direction:"left"},{width:40,snapPos:G.value,direction:"right"}],alwaysShowHandle:!0,disableTransition:Q.value})),H=S(!1),E=we(),N=ye(),C=k(()=>{var c,f;return E.currentUser?((f=(c=E.currentUser)==null?void 0:c.role)==null?void 0:f.app_access)||!1:!0}),L=S(!1),{sidebarOpen:I,fullScreen:ue}=ve(N),_e=k(()=>E.currentUser&&"appearance"in E.currentUser?E.currentUser.appearance:"auto");st("main-element",m),p.afterEach(()=>{var c;(c=m.value)==null||c.scrollTo({top:0}),ue.value=!1}),tt({title:_});function pe(c){c.target&&c.target.classList.contains("close")===!1&&(I.value=!0)}function me(c,f){return c&&!Number.isNaN(c)?Number(c):f}return(c,f)=>{const q=v("v-button"),ie=v("v-info"),ge=v("v-overlay");return C.value===!1?(a(),g(ie,{key:0,center:"",title:u(t)("no_app_access"),type:"danger",icon:"block"},{append:s(()=>[l(q,{to:"/logout"},{default:s(()=>[F(U(u(t)("switch_user")),1)]),_:1})]),default:s(()=>[F(U(u(t)("no_app_access_copy"))+" ",1)]),_:1},8,["title"])):(a(),M("div",{key:1,class:j(["private-view",{appearance:_e.value,"full-screen":u(ue),splitView:c.splitView}])},[x("aside",{id:"navigation",role:"navigation","aria-label":"Module Navigation",class:j({"is-open":H.value,"has-shadow":c.sidebarShadow})},[l(wt),l(Me,{width:Z.value,"onUpdate:width":f[0]||(f[0]=D=>Z.value=D),"min-width":n.minModuleNavWidth,"max-width":X.value,options:le.value,onDragging:f[1]||(f[1]=D=>Q.value=D),onTransitionEnd:V},{default:s(()=>[x("div",dn,[l(ln),x("div",vn,[Y(c.$slots,"navigation",{},void 0,!0)])])]),_:3},8,["width","min-width","max-width","options"])],2),x("div",{id:"main-content",ref_key:"contentEl",ref:m,class:"content"},[l(Je,{ref_key:"headerBarEl",ref:d,small:c.smallHeader||c.splitView,shadow:c.headerShadow||c.splitView,"show-sidebar-toggle":"",title:c.title,"onToggle:sidebar":f[2]||(f[2]=D=>I.value=!u(I)),onPrimary:f[3]||(f[3]=D=>H.value=!H.value)},lt({_:2},[ae(c.$slots,(D,re)=>({name:re,fn:s(ke=>[Y(c.$slots,re,it(rt(ke)),void 0,!0)])}))]),1032,["small","shadow","title"]),x("div",_n,[l(Me,{width:J.value,"onUpdate:width":f[4]||(f[4]=D=>J.value=D),"min-width":n.minContentWidth,"max-width":G.value,disabled:!u(b),options:ee.value,onDragging:f[5]||(f[5]=D=>P.value=D)},{default:s(()=>[z(x("main",null,[Y(c.$slots,"default",{},void 0,!0)],512),[[Ee,T.value]])]),_:3},8,["width","min-width","max-width","disabled","options"]),c.splitView?(a(),M("div",{key:0,id:"split-content",class:j({"is-dragging":P.value})},[Y(c.$slots,"splitView",{},void 0,!0)],2)):B("",!0)])],512),x("aside",{id:"sidebar",ref_key:"sidebarEl",ref:$,role:"contentinfo",class:j(["alt-colors",{"is-open":u(I),"has-shadow":c.sidebarShadow}]),"aria-label":"Module Sidebar",onClick:pe},[x("div",pn,[l(cn,{"sidebar-open":u(I)},{default:s(()=>[Y(c.$slots,"sidebar",{},void 0,!0)]),_:3},8,["sidebar-open"]),mn,l(Zt,{modelValue:L.value,"onUpdate:modelValue":f[6]||(f[6]=D=>L.value=D),"sidebar-open":u(I)},null,8,["modelValue","sidebar-open"])])],2),l(ge,{class:"nav-overlay",active:H.value,onClick:f[7]||(f[7]=D=>H.value=!1)},null,8,["active"]),l(ge,{class:"sidebar-overlay",active:u(I),onClick:f[8]||(f[8]=D=>I.value=!1)},null,8,["active"]),l(xt),L.value===!1?(a(),g(Ot,{key:0,"sidebar-open":u(I)},null,8,["sidebar-open"])):B("",!0),l(Nt)],2))}}}),Sn=R(fn,[["__scopeId","data-v-e89b79df"]]);export{Sn as PrivateView,Sn as default};
